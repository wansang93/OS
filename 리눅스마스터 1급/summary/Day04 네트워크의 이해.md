# 3. 네트워크의 이해

## 3-1. 네트워크의 기초

### 3-1-1. OSI 7 계층

1. OSI 7 계층의 개요
   1. 정의
      - OSI(Open Systems Interconnection Reference Model)
      - ISO에서 컴퓨터 네트워크 프로토콜 디자인과 통신 계층을 구성하여 개발한 네트워크 모델
   2. 특징
      - 개념적 모델, 실제 구현x, 실제 네트워크 구현 시 참조 모델
      - 각 계층은 하위 계층이 제공하는 서비스를 이용, 상위 계층에 서비스 제공
      - 상위 계층 -> 하위 계층 데이터 전달 때 헤더와 트레일러 추가, 캡슐화 진행
      - 하위 계층 -> 상위 계층 데이터 수신 때 헤더와 트레일러 제거, 역캡슐화 수행

2. OSI 7 계층 세부 설명
   1. 1 계층: 물리 계층(Physical Layer)
      - 네트워크의 전기적, 물리적 연결 담당
      - 유선의 경우 케이블의 종류, 무선의 경우 주파수 링크, 핀 배치, 전압, 물리 요건 등 정의
      - 디지털 데이터를 물리 계층의 매체가 전달할 수 있는 신호로 변환
   2. 2 계층: 데이터 링크 계층(Data Link Layer)
      - 회선제어: 신호 간의 충돌 방지
      - 흐름제어: 수신 노드는 수신 속도에 맞추기 위해 송신 노드의 데이터를 느리게 보냄
        - 방법: Stop and wait, Sliding window
      - 오류제어: 오류 검출, 재전송 기능 수행
        - ARQ(Automatic Repeat Request): 수신 측에선 오류 감지시 NAK 반환, 수신측에선 패킷 재전송
        - 방법: 정지 대기 ARQ, Go-Back-N ARQ, SR ARQ
        - FEC(Forward error control): 재전송 하지 않고 직접 오류 정정
      - 2개의 송수신 노드는 식별 가능하도록 MAC(Medium Access Control) 주소를 가지고 있음
      - 송수신측의 물리적 주소 및 오류 검출을 위한 CRC 값을 포함한 해더 및 트레일러 추가
      - 좀 더 세부적으로 매체접근제어(MAC) 계층과 논리연결제어(LLC) 계층으로 나눔
   1. 3 계층: 네트워크 계층(Network Layer)
      - 논리적 주소를 설정, 정확하게 전송하는 역할 수행
      - 경로 설정, 라우팅 기능 제공
      - 혼잡 제어(congestion control), 패킷의 분할 및 병합, 인터네트워킹 기능 제공
   2. 4 계층: 전송 계층(Transport Layer)
      - 프로세스 간 연결 제공, 신뢰성 있는 통신이 가능하도록 역할 수행
      - 주소, 포트 지정, 연결제어, 오류 복구, 흐름 제어 기능 제공
      - 커널의 시스템 콜을 통해 상위 계층에 기능 제공
      - 잘 알려진 전송 계층의 구현사례: TCP/IP
   3. 5 계층: 세션 계층(Session Layer)
      - 연결된 노드 간 메시지 단위로 데이터 전송, 세션 설정 및 유지, 동기 기능, 대화 기능 제공
      - 동기 기능: 통신 양단에서 논리적으로 상호 전송이 잘 되었다는 의미로 동기점(synchronization point)을 설정, 오류 발생 시 동기점 후의 데이터만 복구
      - 대화 기능: 데이터 전송 기능 의미, 신뢰성 보장을 위한 시간 경과에 따라 순차적 동기점 부여, 단계적으로 데이터 전송
   4. 6 계층: 표현 계층(Presentation Layer)
      - 서로 다른 표현 방식을 사용하면 의미 해석 불가, 다양한 표현 방식 제공하고 동일한 표현 방식을 사용할 수 있는 기능 제공
      - 유니코드로 인코딩된 파일을 ASCII로 변환하여 형식을 맞추는 기능을 포함
      - 데이터 암호화와 해독 기능, 압축 및 압축 해제 기능 제공
   5. 7 계층: 응용 계층(Application Layer)
      - 사용자에게 편리한 응용 환경을 제공
      - 전자우편(SMTP), 웹서비스(HTTP), 원격접속(RDP), 파일전송(FTP) 등

3. OSI 7 계층의 전송 단위 및 프로토콜
   | 계층 |  계층 이름   | 전송 단위 |                       설명(장비)                       | 프로토콜                                           |
   | ---: | :----------: | :-------: | :----------------------------------------------------: | :------------------------------------------------- |
   |    1 |     물리     |   비트    | 프레임 물리 매체에 따라 비트 단위로 전송(허브, 리피터) | RS-232, USB, I2C, Bluetooth                        |
   |    2 | 데이터 링크  |  프레임   |   패킷을 프레임 단위로 나누어 전송 (브리지, 스위치)    | Ethernet, Token Ring, FDDI, ATM                    |
   |    3 |   네트워크   |   패킷    |       세그먼트를 패킷 단위로 나누어 전송(라우터)       | IP, ICMP, ARP, RARP, IGMP, BGPG, RIP, IPX          |
   |    4 |     전송     | 세그먼트  |  메시지를 전송에 최적화한 세그먼트 단위로 나누어 전송  | TCP, UDP, RTP                                      |
   |    5 |     세션     |  메시지   |  사용자가 전송하고자 하는 데이터를 메시지 단위로 전송  | SSL, TLS, NetBIOS                                  |
   |    6 | 프레젠테이션 |    ''     |                           ''                           | SMB, AFP, ASN.1                                    |
   |    7 |     응용     |    ''     |                           ''                           | HTTP, SMTP, POP3, IMAP, DNS, NFS, FTP, SSH, TELNET |


### 3-1-2. 네트워크 장비

1. LAN 구성 장비
   1. 네트워크 카드(Network Card)
      - 네트워크 장치, 컴퓨터를 네트워크에 연결 가능하게 함
      - LAN카드: NIC(Local Area Network) 환경에서 연결하는 네트워크 카드
      - 이더넷 카드: 이더넷 방식으로 연결하는 경우
      - OSI 7 계층 중 1 계층과 2 계층의 기능 수행, MAC 주소라는 고유 주소 지정 기능 제공
      - 네트워크 카드는 ISA 방식, PCI 방식 지원, 인터넷의 대중화와 가격 절감을 위해 온보드되어 제공
      - 다양한 방식의 인터페이스의 네트워크 카드들: PCIe, Firewire, USB, Thunderbolt 등
   2. 케이블
      - 네트워크 신호를 전달하는 물리적인 전송 매체
      - 이더넷을 구성하는 케이블: 꼬임선(Twisted Pair Wire), 동축 케이블(Coaxial cable), 광섬유(Optical fiber cable)
   3. 허브
      - 플러딩(flooding) 장치: 다수의 장치를 LAN에 접속할 수 있도록 한 장치에서 전송한 데이터 프레임을 모든 장비에 전송
      - 허브에 다수의 장치를 연결할 때 허브를 중심으로 장치들을 스타형으로 연결
      - 신호 증폭 역할 수행, 전송 거리 연장 기능
      - 장점: 간단하게 네트워크 확장 가능
      - 단점: 패킷을 허브의 모든 포트로 브로드캐스트 -> 데이터 충돌 발생 가능성 높음, 성능 저하

2. 인터네트워크 장비
   1. 리피터
      - 1계층 장비, 데이터 전송 시 감쇄(attenuated)현상으로 인해 신호가 약해 진것을 증폭
   2. 브리지
      - 2계층 장비, 여러 개의 네트워크 세그먼트를 연결하기 위해 MAC 주소를 보고 해당 포트로 데이터를 포워딩함
      - 모든 포트로 플러딩 하지 않아 효과적 프레임 전달 가능
      - 브리지 테이블 관리: 데이터 전송할 포트를 빠르게 찾기 위해
   3. 라우터
      - 독립된 네트워크 서로 연결, 패킷을 목적지까지 효과적인 경로 탐색해 데이터 포워딩
      - 네트워크를 서로 연결해 줌, 라우팅 테이블을 통해 경로 설정 기능
      - 포워딩 기능: 한 포트의 패킷을 다른 포트로 전달
   4. 게이트웨이
      - 프로토콜의 변환 기능 수행, ex) 무선랜을 다른 통신망에 연결하기 위해 게이트웨이 필요

### 3-1-3 데이터 통신의 기본 이해

1. 네트워크 토폴로지
   1. 스타(star)형
      - 중앙 노드와 사용자 노드의 일대일 대응, 이더넷 네트워크에선 중앙에는 허브 위치
      - 장점: 확장 용이, 노드 결함시 다른 노드에 영향x, 결함 허용 능력
      - 단점: 사용자 노드 수 증가시 패킷 충돌 가능성 높아짐, 중앙 노드 고장시 마비
   2. 버스(bus)형
      - 단일 회선(bus)에 사용자 노드가 T자 모양으로 연결, 회선 끝에는 종단기(Terminator)를 설치, 신호 반사 방지
      - 한 시점에 하나의 사용자 노드만 회선을 점유 CSMA/CD, 토큰 패싱(Token Passing)같은 전송 방식 사용
      - 장점: 구조가 간단, 노드 추가 제거 용이, 결함 허용 능력 제공
      - 단점: 대역폭 공유 -> 노드의 수 증가시 성능 저하
   3. 링(ring)형
      - 네트워크의 노드가 원형 연결
      - 장점: 설치 비용 저렴, 넓은 지역 설치 가능
      - 통신 효율성 낮음, 한 노드 장애 발생시 전체 중단, 넓은 지역 구축시 비용 증가
   4. 망(mesh)형
      - 모든 노드가 개별적으로 그물처럼 연결
      - 라우터로 LAN 구성 시 LAN 연결 or 백본망(backbone)을 구성해 사용
      - 장점: 가용성, 효율성이 높음, 장애 발생 시 다른 경로로 데이터 전송 가능
      - 단점: 설치, 관리, 재구성이 어려움, 많은 링크 필요해 설치 비용이 비쌈

2. 네트워크 통신 방식
   1. 이더넷(Ethernet)
      - 이더넷이란? 링크 -> [http://blog.naver.com/haeri056/220805367585](http://blog.naver.com/haeri056/220805367585)
      - LAN, NAN, WAN을 구축하기 위해 일반적으로 사용하는 네트워크 기술
      - 고유의 MAC 주소를 통해 상호간에 데이터를 주고 받을 수 있도록 함
      - CSMA/CD 기술 사용해 이더넷에 연결된 여러 컴퓨터들이 하나의 전송 매체를 공유할 수 있도록 함
      - 전송속도: 기본 10Mbps ~ 1Gbps 지원, 비동기식 직렬 통신과 부호화 방식으로 맨체스터 인코딩 사용
      - 데이터는 이더넷 프레임 형식으로 전달, 송수신 MAC 주소를 포함하는 헤더 14bytes, 최대 전송 크기 1500bytes, 마지막엔 FCS(Frame Check Sequence)가 붙음
      - 전송 매체는 동축(BNC), UTP, STP 등 사용, 네트워크 기기를 연결하기 위해 허브, 스위치, 리피터 등 장치 사용
      - 이더넷은 반이중통신(half duplex) 지원, CSMA/CD로 데이터 전송
      - 2, 5는 동축 케이블 의미, 약 200m, 500m 를 의미함
      - T: Twisted 케이블, TX: UTP-5 or STP, FX: 광케이블, SX: 단파장 광섬유, LX: 장파장 광섬유
   2. 토큰링(Token Ring)
      - LAN 구축하기 위해 토큰을 획득한 노드만 데이터를 전송할 수 있는 네트워크 기술
      - 스위치 이더넷 보급 후 쇠퇴, 그 이전엔 이론적으로 빠르고 안정적 기술로 각광
   3. FDDI(Fiber Distributed Data Interface)
      - LAN들을 연결하는 백본(backbone)망을 구성하기 위해 주 링(primary ring)과 부 링(secondary ring)으로 구성된 이중 링(dual ring)에 스테이션이 연결, 100Mbps의 대역폭을 갖는 네트워크 기술

3. 네트워크 유형
   1. LAN(Local Area Network)
      - 한정된 지역에 로컬로 네트워크 구성
      - 일반적으로 이더넷과 TCP/IP를 통해 구축, 무선 방식은 IEEE802.11 표준에 따라 무선랜을 구축
   2. MAN(Metropolitan Area Network)
      - LAN보다 범위가 크고 WAN보다 범위가 작은 도시권 통신망
      - IEEE802.6 에 정의된 DQDB(Distributed Queue Dual Bus) 토폴로지 기법 사용
   3. WAN(Wide Area Network)
      - 광역 통신망, 전용 회선 방식은 통신 사업자가 계약 체결해 안정성 우수, 비용이 비쌈

4. 교환 방식
   1. 회선 교환 방식(Circuit Switched Network)
      - 사용자 간 미리 연결 설정, 회선 점유, 연결되어 있는 경우 기다려야 함
      - 전화, PSTN
   2. 패킷 교환 방식(Packet Switch Network)
      - 대역폭 낭비 최소화, 데이터를 일정 크기로 분할한 패킷 송수신
      - 회선 공유, 대역폭 이용 효율 극대화, 무제한 사용자 연결 가능, 패킷마다 우선순위 부여
      - 패킷 생성을 위해 헤더가 추가되 오버헤드로 인한 성능 저하와 지연 현상 발생 가능
      - 데이터그램(datagram) 방식과 가상 회선(virtual circuit) 구분
        - 데이터그램 방식: 논리적 연결x, 패킷이 독립적 전송, 도착 순서가 바뀔 수 있음, 짧은 메시지 일시적 전송 적합
        - 가상 회선 방식: 논리적 연결o, 경로 설정 한번만 수행, 동일 경로로 전달, 도착 순서 보장, 다량의 데이터 연속 전송 적합

5. 패킷 교환 기술
   1. X.25
      - 표준화된 통신 규약 개발: 초기 컴퓨터 통신망은 전화망을 이용, 통신사마다 독자적 프로토콜 사용, 호환성 문제
      - X.25는 DTE(Data Terminal Equipment)와 DCE(Data Circuit-terminating Equipment)간의 점대점 인터페이스 정의
   2. 프레임 릴레이
      - 고속망에 대한 사용자 요구에 대응하기 위해 개발한 패킷 교환 기술
      - 통계적 다중화(Statistical Multiplexing) 기능을 제공해 효율적인 대역폭 사용 제공
      - 오류 제어 기능을 단순화, 데이터 재전송과 같은 오류 복구 기능을 상위 프로토콜에 일임함
   3. 셀 릴레이(ATM: Asynchronous Transfer Mode)
      - ATM 기술로 속도 향상
      - 모든 정보를 48bytes로 구분, 블록 생성, 5bytes에 해더를 붙인 셀로 전송, 교환
      - 전송속도: 56kbit/s ~ 수Gbit/s, 흐름제어와 오류제어 기능x

### 3-1-4. TCP/IP 및 네트워크 프로토콜의 이해

1. 프로토콜
   1. 프로토콜의 개요
      - 컴퓨터나 통신 장비 사이에 메시지를 주고 받는 양식이나 규칙의 체계
      - 형식(Syntax), 의미(Semantic), 타이밍(Timing)으로 구성
      - 형식: 데이터의 구조나 형식을 말함
      - 의미: 형식에 따라 담긴 데이터를 어떻게 해석할 것인가, 어떤 기능을 수행하는가
      - 타이밍: 의미를 담은 데이터가 어떤 순서로 오고 가고 하는지와 속도 정의
   2. 프로토콜의 기능
      - 에러제어(error control): 데이터 전송 중 에러 검출 및 에러 정정 정의
      - 캡슐화(encpasulation): 통신 계층상 각 계층마다의 특정 제어 정보 정의
      - 연결제어(connetcion control): 연결 지향 통신에서 연결의 설정, 데이터 송수신, 연결 종료 절차 정의
      - 순서제어(sequence control): 패킷의 순서의 역전, 중복 패킷 발생 방지
      - 흐름제어(flow control): 보낼 데이터의 양 조절
      - 혼잡제어(congestion control): 대기하고 있는 패킷의 양 조절, 패킷이 혼잡해지지 않도록 조절
      - 동기화(synchronization): 데이터 송수신 측의 타이머 값, 윈도우 크기 등 매개변수 정보를 일치하는 방법 제공
      - 주소지정(addressing): 여러 개체 중 하나의 개체를 식별할 수 있는 방법 제공
      - 단편화 및 재조정(fragmentation and reassembly): 데이터를 분할 전송, 재조립 하는 방법 제공
      - 데이터 형식화(data formatting): 전송 데이터의 형식이 무엇인지 방법 제공
   3. 표준 제정 위원회
      - 국제표준기구(ISO, International Standards Institute): 각 국의 표준제정위원회에서 선정된 위원들로 구성된 다국적 기구
      - 미국국립표준협회(ANSI, American National Standards institute): 사립 비영리 법인
      - 국제전기통신연합(ITU-T, International Telecommunications Union): UN 산하기구
      - 전기전자공학회(IEEE, Institute of electrical and electronic engineers): 세계에서 가장 규모가 큰 전문공학학회
      - 전자산업협회(EIA, Electronic Industries Association): 제조업체 중심의 비영리 기관
      - 한국정보통신기술협회(TTA, Telecommunications Technology Association): 국내외 정보통신분야 기여

2. TCP/IP
   1. TCP/IP 개요
   2. TCP/IP 구조
   3. TCP와 UDP
   4. 포트 번호
   5. 소켓

3. IP 주소(internet protocol address)
   1. IP 주소
   2. IP 주소의 클래스
   3. 특수 목적 IP 주소

4. 서브넷(subnetting)
   1. 서브넷의 필요성
   2. 서브넷마스크(subent mask)
   3. 서브넷마스크와 호스트의 갯수
   4. C 클래스 기준 서브넷 구성해보기

5. 도메인(domain)
   1. 도메인네임(Domain Name)
   2. 도메인 체계
   3. 도메인네임 시스템(DNS: Domain Name System)
   4. ICANN(Internet Corporation for Assgined Names and Numbers)

6. IPv6(Internet Protocol version 6)
   1. IPv6 개요
   2. 특징
   3. IPv4와의 비교

## 3-2. 네트워크의 설정

### 3-2-1. 환경설정

1. 리눅스 네트워크 환경설정 개요
   1. 호환성
   2. 다양성

2. 인터넷 접속을 위한 이더넷 카드(Ethernet card) 설치하기
   1. ~

3. 인터넷 접속을 위한 네트워크 인터페이스 설정 방법
   1. GUI 기반 네트워크 설정(CentOS 6.9기준)
   2. 텍스트 기반 네트워크 설정
   3. 명령어를 통한 IP 수동 설정
   4. 네트워크 설정 파일을 통한 IP 수동 설정

### 3-2-2. 네트워크 설정 명령어

1. ifconfig
   1. 설명
   2. 형식
   3. 네트워크설정 보기
   4. 모든 네트워크 인터페이스의 설정 보기
   5. 특정 네트워크 인터페이스의 설정 보기
   6. 특정 네트워크 인터페이스 활성화 및 비활성화 하기
   7. 네트워크 설정하기

2. route
   1. 설명
   2. 형식
   3. 라우팅 테이블 출력하기
   4. 디폴트 게이트웨이 추가 및 삭제하기
   5. 특정 네트워크에 대한 라우팅 정보 추가 및 삭제하기
   6. 특정 호스트에 대한 라우팅 정보 추가 및 삭제하기

3. arp
   1. 설명
   2. 형식
   3. arp 캐시 보기
   4. arp 캐시에 정보 추가 및 삭제하기
   5. 그 밖의 옵션

### 3-2-3. 네트워크 진단 명령어

1. ethtool
   1. 설명
   2. 형식
   3. 예제

2. ip
   1. 설명
   2. 형식
   3. 주요 옵션
   4. 네트워크 인터페이스의 정보 출력
   5. IP 할당 및 제거
   6. 네트워크 인터페이스 상태 및 파라미터 변경
   7. 네트워크 인터페이스의 ARP 캐시 관리
   8. 라우팅 정보 관리

3. ping
   1. 설명
   2. 형식
   3. 주요 옵션
   4. Ping 전송하기
   5. 정한 시간 동안 ping하기

4. netstat
   1. 설명
   2. 형식
   3. 주요 옵션
   4. 연결되어 있는 모든 소켓 정보 출력하기
   5. 라우팅 정보 출력하기
   6. 특정 주소 패밀리(address family)에 대한 정보만 출력

5. traceroute
   1. 설명
   2. 형식
   3. 특정 사이트에 어떤 경로로 패킷이 전달되는지 추적하기
   4. 다양한 방식을 통해 경로 추적하기

6. mil-tool
   1. 설명
   2. 형식
   3. 네트워크 인터페이스 정보 출력
   4. 네트워크 인터페이스 재시작
   5. 네트워크 인터페이스 설정 변경

7. ss
   1. 설명
   2. 형식
   3. 옵션
   4. 주요 예제

### 3-2-4. DNS 명령어

1. nslookup
   1. 설명
   2. 형식
   3. 대화형으로 네임 서버 질의하기
   4. 옵션으로 네임 서버 질의하기
   5. DNS 중 MX(Mail Record) 조회하기
   6. CNAME과 NS 레코드 조회하기

2. dig
   1. 설명
   2. 형식
   3. dig을 통해 다양한 정보 조회하기

3. host
   1. 설명
   2. 형식
   3. 주요 옵션
   4. 주요 예제

4. hostname
   1. 설명
   2. 형식
   3. 주요 옵션
   4. 주요 예제

### 3-2-5. 네트워크 응용 프로그램

1. telnet
   1. 설명: telnet 프로토콜 기반 대화형 통신을 위한 텔넷 서버에 접속
   2. 형식: `telnet [options] address`
   3. 주요 예제
      ```bash
      telnet mysite.com  # mysite.com에 텔넷 접속
      telnet 192.168.100.80  # 192.168.100.80에 텔넷 접속
      telnet -l myusername mysite.com 6666  # mysite.com에 6666 포트를 통해 텔넷 접속 수행, -l 옵션으로 사용자 계정으로 접속
      telnet  # 대화형 텔넷 접속
      ```

2. ftp
   1. 설명: 파일 전송을 위한 FTP 서버에 접속, 업로드 다운로드 가능
   2. 형식: `ftp hostname | address`
   3. 예제
      ```bash
      $ ftp 192.168.100.77  # IP 주소로 ftp 서버에 접속
      $ ftp ftp.my.com  # 호스트 이름을 통해 ftp 접속
      ```
